

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Zero Footprint Deployment (ZFP) &mdash; RANK API Programmers Guide 0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="RANK API Programmers Guide 0.1 documentation" href="index.html"/>
        <link rel="next" title="RANK API data request" href="requestResponse.html"/>
        <link rel="prev" title="Introduction" href="introduction.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> RANK API Programmers Guide
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Zero Footprint Deployment (ZFP)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#end-point">End-Point</a></li>
<li class="toctree-l2"><a class="reference internal" href="#end-point-discovery-connectivity">End-Point Discovery &amp; Connectivity</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tcp-or-socks-proxy">TCP or SOCKS Proxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="#concurrent-connection">Concurrent Connection</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-install-serverapi-exe">How to Install serverapi.exe</a></li>
<li class="toctree-l2"><a class="reference internal" href="#linux-environment">Linux Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#windows-environment">Windows Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-user-identities">Creating User Identities</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-user-identities">Using User Identities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="requestResponse.html">RANK API data request</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">RANK API Programmers Guide</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Zero Footprint Deployment (ZFP)</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/serverApi.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="zero-footprint-deployment-zfp">
<h1>Zero Footprint Deployment (ZFP)<a class="headerlink" href="#zero-footprint-deployment-zfp" title="Permalink to this headline">¶</a></h1>
<p>Traditionally, Bloomberg soultions are connected via pair of Bloomberg appliances which are deployed at the customer&#8217;s site(s). The zero footprint solution offers a lighter technical footprint to better meet the customer needs. A zero footprint solution does not require Bloomberg hardware and there will be no cost associated with racking and stacking the hardware at the customer&#8217;s data center. With the zero footprint soultion, the software that is normally installed in the appliance runs on the Bloomberg cloud or in a Bloomberg managed virtual private cloud in AWS (Amazon Web Services). The zero footprint solution is accessible via both internet and private leased lines.</p>
<div class="section" id="end-point">
<h2>End-Point<a class="headerlink" href="#end-point" title="Permalink to this headline">¶</a></h2>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Prior to connecting, customer must create an endpoint to Bloomberg service on AWS. (Amazon Web Services)</p>
</div>
<p>Production:</p>
<p>Production (China):</p>
<p>Beta:</p>
<p>Port Number:</p>
</div>
<div class="section" id="end-point-discovery-connectivity">
<h2>End-Point Discovery &amp; Connectivity<a class="headerlink" href="#end-point-discovery-connectivity" title="Permalink to this headline">¶</a></h2>
<p>ZFP over Internet:</p>
<p>ZFP over Leased Line(s):</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">The client should always use the host name listed below and not the actual IP addresses.</p>
</div>
</div>
<div class="section" id="tcp-or-socks-proxy">
<h2>TCP or SOCKS Proxy<a class="headerlink" href="#tcp-or-socks-proxy" title="Permalink to this headline">¶</a></h2>
<p>As of SDK 3.14.x.x, the SOCKS proxy is not supported in Bloomberg API.</p>
</div>
<div class="section" id="concurrent-connection">
<h2>Concurrent Connection<a class="headerlink" href="#concurrent-connection" title="Permalink to this headline">¶</a></h2>
<p>The maximum concurrent connection allowed is 12 per certificate. For clients connecting via internet,</p>
</div>
<div class="section" id="how-to-install-serverapi-exe">
<h2>How to Install serverapi.exe<a class="headerlink" href="#how-to-install-serverapi-exe" title="Permalink to this headline">¶</a></h2>
<p>Please follow the following steps to install and register the installer with Bloomberg Enterprise Solutions with the assistance from EMSX Implementation team.</p>
</div>
<div class="section" id="linux-environment">
<h2>Linux Environment<a class="headerlink" href="#linux-environment" title="Permalink to this headline">¶</a></h2>
<p>The following example is based on the linux environment.</p>
<ul class="simple">
<li>Run serverapi.exe</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span># ./serverapiinstaller64
</pre></div>
</div>
<ul class="simple">
<li>You will see the following message</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span># ./serverapiinstaller64
logging to /tmp/bloomberg/install.2019111211.130037.log

Bloomberg ECD Installer for Linux (64-bit)
Version 3.2.2.0


Warning: This program is protected by copyright law and international treaties.

Unauthorized reproduction or distribution of this program, or any portion of
it, may result in severe civil and criminal penalties, and will be prosecuted
to the maximum extent possible under law.

Would you like to continue? (Y/N):
</pre></div>
</div>
<ul class="simple">
<li>Type:- Y</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>Would you like to continue? (Y/N): Y

Checking connectivity to Bloomberg ...


a) via Bloomberg Network to [ Hostname = 208.134.161.62 Port = 8194 ] ...
Succeeded.

                                                        [ Hostname = 208.134.161.158 Port = 8194 ] ...
Succeeded.

                                                        [ Hostname = 208.134.161.18 Port = 8194 ] ...
Succeeded.

                                                        [ Hostname = 208.134.161.179 Port = 8194 ] ...
Succeeded.

b) via the Internet to [ Hostname = api1.bloomberg.net Port = 8194 ] ...

Could not resolve host: [ Hostname = api1.bloomberg.net Port = 8194 ]

Error.

                                        [ Hostname = api2.bloomberg.net Port = 8194 ] ...

Could not resolve host: [ Hostname = api2.bloomberg.net Port = 8194 ]

Error.

                                        [ Hostname = api3.bloomberg.net Port = 8194 ] ...

Could not resolve host: [ Hostname = api3.bloomberg.net Port = 8194 ]

Error.

                                        [ Hostname = api4.bloomberg.net Port = 8194 ] ...

Could not resolve host: [ Hostname = api4.bloomberg.net Port = 8194 ]

Error.

                                        [ Hostname = api5.bloomberg.net Port = 8194 ] ...

Could not resolve host: [ Hostname = api5.bloomberg.net Port = 8194 ]

Error.

                                        [ Hostname = api6.bloomberg.net Port = 8194 ] ...

Could not resolve host: [ Hostname = api6.bloomberg.net Port = 8194 ]

Error.

                                        [ Hostname = api7.bloomberg.net Port = 8194 ] ...

Could not resolve host: [ Hostname = api7.bloomberg.net Port = 8194 ]

Error.

                                        [ Hostname = api8.bloomberg.net Port = 8194 ] ...

Could not resolve host: [ Hostname = api8.bloomberg.net Port = 8194 ]

Error.

Internet connectivity unavailable. Connecting via the Bloomberg Network.
</pre></div>
</div>
<ul class="simple">
<li>Select the appropriate network option if it doesn&#8217;t select by default (private vs. public/internet)</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>Select Product Class
1) blpddm    Software that provides development access to distribute data locally or contribute data to Bloomberg.
2) ServerApi Provides access to Bloomberg real-time streaming and static data
0) Quit
</pre></div>
</div>
<ul class="simple">
<li>Select:- 2 for Server API</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>Please enter selection: 2

Installation path:
                &#39;/opt/local&#39;

Use this path? (Y/N/Q):
</pre></div>
</div>
<ul class="simple">
<li>Select:- York</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>Creating the root directory /opt/local ...
done.

Downloading latest installer ...
done.

logging to /tmp/bloomberg/install.2019111211.130037.log

Beginning new install ...
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the default port is already being used by a different service it may show the following message:</p>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>*** WARNING: Port conflict detected with other service.
The port of the Desktop will conflict with the ServerApi should installation proceed. If you still want to install
ServerApi, you will need to specify a different port number.

 Do you want to continue with the installation? (Y/N) [N]:
</pre></div>
</div>
<ul class="simple">
<li>Select:- Y and enter the port</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>Do you want to continue with the installation? (Y/N) [N]:y
Please enter ServerApi listen port: [8294]:8294
</pre></div>
</div>
<ul class="simple">
<li>Select the version:-</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>Versions available for ServerApi
1) 3.86.5.1     Linux64     ServerAPI 2017-06

2) 3.88.0.1     Linux64     ServerAPI 2017-08

3) 3.90.3.1     Linux64     ServerAPI 2017-10

4) 3.90.6.1     Linux64     ServerAPI 2018-01

5) 3.98.5.1     Linux64     ServerAPI 2018-04

6) 3.102.0.1    Linux64     ServerAPI 2018-05

7) 3.106.0.1    Linux64     ServerAPI 2018-07

8) 3.112.3.1    Linux64     ServerAPI 2018-10

9) 3.112.4.1    Linux64     ServerAPI 2019-01

10) 3.114.9.1    Linux64     ServerAPI 2019-04

11) 3.118.9.1    Linux64     ServerAPI 2019-07

12) 3.120.2.0    Linux64     Development B-Pipe 2019-10 (64-bit)

13) 3.120.2.1    Linux64     ServerAPI 2019-10

0) Quit
Please enter version of ServerApi that you want to install:
</pre></div>
</div>
<ul class="simple">
<li>Select the latest:-</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>Please enter version of ServerApi that you want to install: 13
Downloading ServerApi components ...
</pre></div>
</div>
<ul class="simple">
<li>Enter other information:-</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>Enter the following information:

                Country (e.g., USA):
                State (e.g., NY):
                City or Town (e.g., New York):
                Company Name (e.g., Bloomberg L.P.):
                Department Name (e.g., Equity Trading)
</pre></div>
</div>
<ul class="simple">
<li>Finished:-</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>Enter the following information:

                Country (e.g., USA): USA
                State (e.g., NY): NY
                City or Town (e.g., New York): New York
                Company Name (e.g., Bloomberg L.P.): My Firm
                Department Name (e.g., Equity Trading): Futures Trading

Creating certificate ...
done.

Registering server ...
done.

done.

Call Bloomberg&#39;s Global Customer Support at +1 (212) 318-2000 and ask for the Global Installs desk. The Bloomberg representative will ask you to read your registration number over the phone four characters at a time.


Your registration key is:
                123b-4567-1ab2-12c9-g66f-964e-h50b-fa48-c78t-a123


This key was also saved in regkey.txt in the ServerApi root directory.

ServerApi installation completed. Press ENTER to quit:
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Once the registration process is completed. EMSX Implementation team globally will assist with configuring the Server Side EMSX API with various execution destinations per client request.</p>
</div>
</div>
<div class="section" id="windows-environment">
<h2>Windows Environment<a class="headerlink" href="#windows-environment" title="Permalink to this headline">¶</a></h2>
<p>The following example is based on the windows environment.</p>
<ul class="simple">
<li>Run serverapi.exe</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>C:\temp&gt;serverapiinstaller.exe
</pre></div>
</div>
<ul class="simple">
<li>You will see the following message</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>C:\temp&gt;serverapiinstaller.exe
logging to C:\temp\install.2016102610.152444.log

Bloomberg ECD Installer for Windows (32-bit)
Version 3.2.2.0


Warning: This program is protected by copyright law and international treaties.

Unauthorized reproduction or distribution of this program, or any portion of
it, may result in severe civil and criminal penalties, and will be prosecuted
to the maximum extent possible under law.


logging to C:\temp\install.2016102610.152444.log

Bloomberg ECD Installer for Windows (32-bit)
Version 3.2.2.0


Warning: This program is protected by copyright law and international treaties.

Unauthorized reproduction or distribution of this program, or any portion of
it, may result in severe civil and criminal penalties, and will be prosecuted
to the maximum extent possible under law.


Would you like to continue? (Y/N):
</pre></div>
</div>
<ul class="simple">
<li>Type:- Y</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>Would you like to continue? (Y/N): y

Checking connectivity to Bloomberg ...


a) via Bloomberg Network to [ Hostname = 208.134.161.62 Port = 8194 ] ...
Succeeded.

                            [ Hostname = 208.134.161.158 Port = 8194 ] ...
Succeeded.

                            [ Hostname = 208.134.161.18 Port = 8194 ] ...
Succeeded.

                            [ Hostname = 208.134.161.179 Port = 8194 ] ...
Succeeded.

b) via the Internet to [ Hostname = api1.bloomberg.net Port = 8194 ] ...
Succeeded.

                       [ Hostname = api2.bloomberg.net Port = 8194 ] ...
Succeeded.

                       [ Hostname = api3.bloomberg.net Port = 8194 ] ...
Succeeded.

                       [ Hostname = api4.bloomberg.net Port = 8194 ] ...
Succeeded.

                       [ Hostname = api5.bloomberg.net Port = 8194 ] ...
Succeeded.

                       [ Hostname = api6.bloomberg.net Port = 8194 ] ...
Succeeded.

                       [ Hostname = api7.bloomberg.net Port = 8194 ] ...
Succeeded.

                       [ Hostname = api8.bloomberg.net Port = 8194 ] ...
Succeeded.


Which of the above routes will you use to connect to Bloomberg? (a/b):
</pre></div>
</div>
<ul class="simple">
<li>Select the appropriate network option (private vs. public/internet)</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>Which of the above routes will you use to connect to Bloomberg? (a/b): b

Bloomberg Network connectivity unavailable. Connecting via the Internet.

Select Product Class
1) blpddm    Software that provides development access to distribute data locally or contribute data to Bloomberg.
2) ServerApi Provides access to Bloomberg real-time streaming and static data
0) Quit

Please enter selection:
</pre></div>
</div>
<ul class="simple">
<li>Select:- 2 for Server API</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>Please enter selection: 2

Installation path:
        &#39;C:\&#39;

Use this path? (Y/N/Q):
</pre></div>
</div>
<ul class="simple">
<li>Select:- Y</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>Use this path? (Y/N/Q): y

Downloading latest installer ...
done.

logging to C:\temp\install.2016102610.152444.log

Beginning new install ...
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the default port is already being used by a different service it may show the following message:</p>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>*** WARNING: Port conflict detected with other service.
The port of the Desktop will conflict with the ServerApi should installation proceed. If you still want to install
ServerApi, you will need to specify a different port number.

 Do you want to continue with the installation? (Y/N) [N]:
</pre></div>
</div>
<ul class="simple">
<li>Select:- Y and enter the port</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>Do you want to continue with the installation? (Y/N) [N]:y
Please enter ServerApi listen port: [8294]:8294
</pre></div>
</div>
<ul class="simple">
<li>Select the version:-</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>Versions available for ServerApi
1) 3.46.6.0     Windows     ServerAPI 2014-07

2) 3.48.8.1     Windows     ServerAPI 2014-09

3) 3.48.9.1     Windows     ServerAPI 2014-11

4) 3.50.7.1     Windows     ServerAPI 2015-01

5) 3.56.4.1     Windows     ServerAPI 2015-04

6) 3.60.0.1     Windows     ServerAPI 2015-07

7) 3.64.5.1     Windows     ServerAPI 2015-10

8) 3.70.0.1     Windows     ServerAPI 2016-01

9) 3.72.2.1     Windows     ServerAPI 2016-04

10) 3.82.3.1     Windows     ServerAPI 2016-10

11) 3.46.6.0     Windows64   ServerAPI 2014-07

12) 3.48.8.1     Windows64   ServerAPI 2014-09

13) 3.48.9.1     Windows64   ServerAPI 2014-11

14) 3.50.7.1     Windows64   ServerAPI 2015-01

15) 3.56.4.1     Windows64   ServerAPI 2015-04

16) 3.60.0.1     Windows64   ServerAPI 2015-07

17) 3.64.5.1     Windows64   ServerAPI 2015-10

18) 3.70.0.1     Windows64   ServerAPI 2016-01

19) 3.72.2.1     Windows64   ServerAPI 2016-04

20) 3.82.3.1     Windows64   ServerAPI 2016-10

0) Quit
Please enter version of ServerApi that you want to install:
</pre></div>
</div>
<ul class="simple">
<li>Select the latest:-</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>Please enter version of ServerApi that you want to install: 20
Downloading ServerApi components ...
</pre></div>
</div>
<ul>
<li><p class="first">Enter other information:-</p>
<blockquote>
<div><p>Enter the following information:</p>
<p>Country (e.g., USA):
State (e.g., NY):
City or Town (e.g., New York):
Company Name (e.g., Bloomberg L.P.):
Department Name (e.g., Equity Trading):</p>
</div></blockquote>
</li>
<li><p class="first">Finished:-</p>
</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre><span></span>Enter the following information:

Country (e.g., USA): USA
State (e.g., NY): NY
City or Town (e.g., New York): New York
Company Name (e.g., Bloomberg L.P.): Bloomberg LP
Department Name (e.g., Equity Trading): EMSX

Creating certificate ...
done.

Registering server ...
done.


Do you want to install ServerApi as a Windows Service? (Y/N): y

Installing ServerApi as a windows Service...
service ServerApi configured for restart on first error
 done

done.


*** Please reboot your computer for changes to take effect ***


Call Bloomberg&#39;s Global Customer Support at +1 (212) 318-2000 and ask for the
Global Installs desk. The Bloomberg representative will ask you to read your
registration number over the phone four characters at a time.


Your registration key is:
        321c-5ad5-7fa8-2954-1930-abb0-b64c-ecaf-1505-64d4
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Once the registration process is completed. EMSX Implementation team globally will assist with configuring the Server Side EMSX API with various execution destinations per client request.</p>
</div>
</div>
<div class="section" id="creating-user-identities">
<h2>Creating User Identities<a class="headerlink" href="#creating-user-identities" title="Permalink to this headline">¶</a></h2>
<p>The steps involved in connecting to the EMSX API on the desktop are as follows:-</p>
<img alt="_images/userIdentity.png" src="_images/userIdentity.png" />
<p>In the server environment, the user identities must be created and cached prior to the making requests.  Therefore, the process would look as follows:-</p>
<img alt="_images/userIdentity2.png" src="_images/userIdentity2.png" />
<p>The first new step is to open the authentication service. This is done in the same way as for any other service in the Bloomberg API. For example:-</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>d_authsvc = &quot;//blp/apiauth&quot;;
session.openServiceAsync(d_authsvc);
</pre></div>
</div>
<p>Once the service is opened, we need to create and send an authorization request. To create an identity for a specific user, you will need the AuthID for the user. This is the name the user is known by in the EMRS system for your server. The values for these names will have been agreed with you as part of the implementation of the server, or subsequently when adding a new user. Also, an IP address is required. The only requirement for this IP address is that it is unique amongst all the identities generated for a session. You can create and send the request as follows:-</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>private Identity userIdentity;

*
*
*

Service authService = session.getService(d_authsvc);
Request authReq = authService.createAuthorizationRequest();

authReq.set(&quot;authId&quot;, authID);
authReq.set(&quot;ipAddress&quot;, appIP);

userIdentity = session.createIdentity();

authRequestID = new CorrelationID();

try
{
        session.sendAuthorizationRequest(authReq, userIdentity, authRequestID);
}
catch (Exception e)
{
        System.out.println(&quot;Unable to send authorization request: &quot; + e.getMessage());
}
</pre></div>
</div>
<p>In the above code, you can see that an empty identity object is created using <code class="docutils literal"><span class="pre">session.createIdentity()</span></code>. This is the object that will be populated once successful authentication has been achieved, and it is the object that will need to be cached.</p>
<p>We will receive a Response event for the Authentication service. In the example below, we use a <code class="docutils literal"><span class="pre">CorrelationID</span></code> to identify messages from the Authentication service, and check for success or failure:-</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>        if(msg.correlationID()==authRequestID) {

        if(msg.messageType().equals(AUTHORIZATION_SUCCESS)) {
                System.out.println(&quot;Authorised...Opening EMSX service...&quot;);
                System.out.println(&quot;Seat Type: &quot; + userIdentity.seatType().toString());
                session.openServiceAsync(d_service);
        } else if(msg.messageType().equals(AUTHORIZATION_FAILURE)) {
                System.out.println(&quot;Authorisation failed...&quot;);
                System.out.println(msg.toString());
                wait(1000);
                // Automatically retry...
                sendAuthRequest(session);
        } else {
                System.out.println(&quot;Unexpected authorisation message...&quot;);
                System.out.println(msg.toString());
        }
}
</pre></div>
</div>
<p>When we receive the successful authorization, we can continue with opening the usual EMSX service. If multiple authorization requests have been sent, for a number of different UUIDs, it is necessary to wait for all the responses before being able to use all the identity objects.</p>
<p>In the above code, you will see that we examine the ‘seatType’ of the identity. The seat type in this case will be either BPS or non-BPS.</p>
</div>
<div class="section" id="using-user-identities">
<h2>Using User Identities<a class="headerlink" href="#using-user-identities" title="Permalink to this headline">¶</a></h2>
<p>When a client application connects to Bloomberg via the API on the desktop, it does so by leveraging the identity of the logged in Bloomberg terminal user. This means that when a request or subscription object is received by the Bloomberg infrastructure, the target user can be identified using the desktop credential.</p>
<p>In the server environment, there is no Bloomberg terminal, and therefore no implied user can be identified.  Moreover, the server is capable of connecting to any number of users, simultaneously. Therefore, the application making the call must indicate which user is the intended target. This is done through the creation and use of Identity object.</p>
<p>An Identity object represents a specific Bloomberg UUID.  Once created, an Identity object can be cached for 24hrs, and used with every <code class="docutils literal"><span class="pre">sendRequest()</span></code> and <code class="docutils literal"><span class="pre">subscribe()</span></code> call.</p>
<p>Identity objects are live, that is they remain connected to Bloomberg in real-time and are capable of receiving events. We recommend that an identity is recreated every 24hrs, to ensure that it picks up the latest changes to any user settings.</p>
<p>Any number of user Identity object can be created by a server-side application. If the application uses the identities of real traders within a firm, then each trader would have an identity created to represent them in the server application. The server application would, perhaps, receive an instruction from the upstream client-side application to create an order in a trader’s blotter. The server application would select the appropriate user identity from the cache and add it to the request.</p>
<p>Migrating the existing desktop application call to a server application simply involves changing all <code class="docutils literal"><span class="pre">sendRequest()</span></code> and <code class="docutils literal"><span class="pre">subscribe()</span></code> calls to include the appropriate identity, as follows:-</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>DAPI:
        session.sendRequest(request, requestID);
        session.subscribe(subscriptions);

Server:
        session.sendRequest(request, Identity, requestID);
        session.subscribe(subscriptions, Identity);
</pre></div>
</div>
<p>Desktop vs. Server Authentication:-</p>
<p>Desktop:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">d_ioi</span> <span class="o">=</span> <span class="s2">&quot;//blp/rankapi-beta&quot;</span>
<span class="n">d_host</span> <span class="o">=</span> <span class="s2">&quot;localhost&quot;</span>
<span class="n">d_port</span> <span class="o">=</span> <span class="mi">1234</span>
</pre></div>
</div>
<p>Server:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">d_ioi</span> <span class="o">=</span> <span class="s2">&quot;//blp/rankapi-beta&quot;</span>
<span class="n">d_auth</span> <span class="o">=</span> <span class="s2">&quot;//blp/apiauth&quot;</span>
<span class="n">d_host</span> <span class="o">=</span> <span class="s2">&quot;abc.com&quot;</span>
<span class="n">d_port</span> <span class="o">=</span> <span class="mi">1234</span>
<span class="n">d_user</span> <span class="o">=</span> <span class="s2">&quot;myAuthID&quot;</span>
<span class="n">d_ip</span> <span class="o">=</span> <span class="s2">&quot;10.20.30.40&quot;</span>
</pre></div>
</div>
<p>Set authorization request:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">sendAuthRequest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">session</span><span class="p">):</span>

    <span class="n">authService</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_auth</span><span class="p">)</span>
    <span class="n">authReq</span> <span class="o">=</span> <span class="n">authService</span><span class="o">.</span><span class="n">createAuthorizationRequest</span><span class="p">()</span>
    <span class="n">authReq</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;emrsID&quot;</span><span class="p">,</span> <span class="n">d_user</span><span class="p">)</span>
    <span class="n">authReq</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;ipAdress&quot;</span><span class="p">,</span> <span class="n">d_ip</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">identity</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">createIdentity</span><span class="p">()</span>

    <span class="k">print</span> <span class="p">(</span><span class="s2">&quot;Sending authorization rquest: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">authReq</span><span class="p">))</span>

    <span class="n">session</span><span class="o">.</span><span class="n">sendAuthorizationRequest</span><span class="p">(</span><span class="n">authReq</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">identity</span><span class="p">)</span>

    <span class="k">print</span> <span class="p">(</span><span class="s2">&quot;Authorization request sent.&quot;</span><span class="p">)</span>

<span class="o">...</span>

<span class="k">def</span> <span class="nf">processAuthorizationStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>

    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Processing AUTHORIZATION_STATUS event&quot;</span><span class="p">)</span>

                    <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;AUTHORIZATION_STATUS message: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">msg</span><span class="p">))</span>

<span class="o">...</span>

<span class="k">def</span> <span class="nf">processEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">session</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>

    <span class="o">...</span>

    <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">eventType</span><span class="p">()</span> <span class="o">==</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">AUTHORIZATION_STATUS</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">processAuthorizationStatusEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

    <span class="o">...</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="requestResponse.html" class="btn btn-neutral float-right" title="RANK API data request" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="introduction.html" class="btn btn-neutral" title="Introduction" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Terrence C. Kim.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>